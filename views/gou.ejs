<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="css/style.css" type="text/css"/>
		<link rel="stylesheet" href="css/pubilc.css" type="text/css"/>
		<link rel="stylesheet" href="css/gouwu.css" type="text/css"/>
	</head>
	<body>
		<div class="header">
			<div class="margin">
				<div class="header-left">
					<p>你好欢迎<b><%=user_session.username %></b>来到景徽菜篮子！</p>
					<a  href="/admin/deng">登录</a>
					<a href="/admin/zhuce">免费注册</a>
				</div>
				<div class="header-right">
					<a href="#">收藏</a>
					<a href="#">客户服务</a>
				</div>
			</div>
		</div>
		<div class="head">
			<div class="margin">
				<a href="#" class="img1"><img src="images/2.png"/></a>
				<a href="#" class="img2"><img src="images/3.jpg"/></a>
				<a href="#" class="img3"><img src="images/6.jpg"/></a>
				<div class="box">
					<form>
						<a href="#"><img src="images/7.png" class="img"/></a>
						<input type="text" name="txt" id="txt" value="请输入关键字进行搜索" />
						<input type="submit" name="btn" id="btn" value="搜索" />
					</form>
				    <p>关键字：   <a href="">石斛</a>
						    	<a href="">厂家直发</a>
						    	<a href="">野猪肉</a>
						    	<a href="">福晒</a>
						    	<a href="">预售</a>
				    </p>
				</div>
				<div class="box1">

					<a href="#"><img src="images/8.gif"/></a>
					<a href="#">400-878-8568</a>
					<a href="#"><img src="images/4.png"/></a>
				</div>
				<a href="#" class="img4"><img src="images/5.gif"/></a>
			</div>
		</div>
		<div id="nav">
			<div class="margin">
				<a href="#" class="xi">全部商品列表</a>
				<ul class="nav">
					<li><a href="/admin/index">首页</a><span>|</span></li>
					<li><a href="#">今日特价</a><span>|</span></li>
					<li><a href="#">建华社区馆</a><span>|</span></li>
					<li><a href="#">追溯农业产品专区</a><span>|</span></li>
					<li><a href="#">手机定单</a><span>|</span></li>
					<li><a href="#">配送时效</a><span>|</span></li>
					<li><a href="#">配送区域</a><span>|</span></li>
					<li><a href="#">企业采购</a><span>|</span></li>
				</ul>
			</div>
		</div>
		<div id="delect">
			<div class="margin">
				<dl>
					<div class="delect-top">
						<dt><input type="checkbox" name="" id="cc" value="" />全选<em>商品</em><i>价格</i><b>数量</b><span>小计</span><u>操作</u></dt>
					</div>
					<div class="delect-bottom">
					</div>
					<div class="delect-1">
						<dd>总计：￥<b class="gigi">0</b></dd>
					</div>
				</dl>
			</div>
		</div>
		<div id="footer">
			<div class="margin">
				<div class="footer-top">
					<div class="footer-top-left">
						<a href="#"><img src="images/63.gif"/></a>
						<h3>1088-567-6989</h3>
					</div>
	                <dl>
	                	<dt>关于我们</dt>
	                	<dd><a href="#">平台介绍</a></dd>
	                	<dd><a href="#">联系我们</a></dd>
	                </dl>
	                <dl>
	                	<dt>购物指南</dt>
	                	<dd><a href="#">交易条款</a></dd>
	                	<dd><a href="#">购物须知</a></dd>
	                	<dd><a href="#">交易条款</a></dd>
	                	<dd><a href="#">购物须知</a></dd>
	                </dl>
	                <dl>
	                	<dt>配送说明</dt>
	            
	                </dl>
	                <dl>
	                	<dt>会员介绍</dt>
	                	<dd><a href="#">等级说明</a></dd>
	                	<dd><a href="#">联系我们</a></dd>
	                </dl>
	                <dl>
	                	<dt>售后服务</dt>
	                	<dd><a href="#">验货与拒收</a></dd>
	                	<dd><a href="#">退换货</a></dd>
	                </dl>
				</div>
				<div class="footer-bottom">
					<a href="#">快速查询</a> |
					<a href="#">百度</a> |
					<a href="#">支付宝</a>
				</div>
				<div class="footer-bottom-bottom">
					<p>客户服务查询：65793298090 传真：759837979</p>
					<p>安徽菜篮子景徽有限公司</p>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript" src="js/jquery.js">
	</script>
	<script type="text/javascript" src="js/json.js">
	</script>

	<script type="text/javascript">
		var arr=document.cookie.split(";");
		console.log(arr);
	    var str="";
	    for(var j=0;j<arr.length;j++){
	    	for(var i=0; i<json.length;i++){
		    	if(arr[j].split("=")[1] == json[i].IP){
		    		str +='<dd data="'+json[i].IP+'"><p><input type="checkbox" name="cc1" class="cc1" value="" /><img src="'
		    		      +json[i].src+'"/><em>'+json[i].name+'</em><br/><b>库存：1324</b></p><span class="ni">'
		    		      +json[i].price+'</span><form><input type="button" name="" class="jian" value="-" />'+
		    		      '<input type="text" name="" class="shu" value="1" /><input type="button" class="jia" value="+" />'+
		    		      '</form><u>5.90</u><a href="#" class="haha">删除</a></dd>'
		    	}
//		    	console.log(str)
	       }
	    }
	    $(".delect-bottom").get(0).innerHTML = str;
      $(".delect-bottom").get(0).addEventListener("click",function(eve){
        var e = eve || window.event;
        var target = e.target || e.srcElement;
        if(target.className == "haha"){
            target.parentNode.remove()
            var id = target.parentNode.getAttribute("data");
            removeCookie(id);
        }
        
    })
    function removeCookie(key){
        setCookie(key,"asdad",-1)
    }
    function setCookie(key,value,day){
         if(day){
             var d = new Date();
             d.setDate(d.getDate()+day);
             document.cookie = key + "=" + value + ";expires=" + d;
         }else{
             document.cookie = key + "=" + value;
         }
    }
    //  购物数量
    
    for(var i=0;i<$("dd").length;i++){
    	var s=1;
	    $("dd").eq(i).children('form').children(".jian").click(function(){
	    	if(s<=1){
	    		s=1
	    	}else{
	    		s--;
	    	}
	    	$(this).siblings(".shu").get(0).value=s;
	    })
	    $("dd").eq(i).children('form').children(".jia").click(function(){
	        s++;
	    	$(this).siblings(".shu").get(0).value=s;
	    })
    }

        
//  复选框勾选    
     $("dd").children("p").children(".cc1").click(function(){
		    if($(this).get(0).checked == true){
		    	var num=Number($(this).parent().siblings("u").get(0).innerHTML) *
		    	Number($(this).parent().siblings("form").children(".shu").get(0).value);
		    	$(".gigi").get(0).innerHTML=Number($(".gigi").get(0).innerHTML)+num;
		    }else{
		    	var num=Number($(this).parent().siblings("u").get(0).innerHTML) *
		    	Number($(this).parent().siblings("form").children(".shu").get(0).value);
		    	$(".gigi").get(0).innerHTML=Number($(".gigi").get(0).innerHTML)-num;
		    	if($(".gigi").get(0).innerHTML<=0){
		    		$(".gigi").get(0).innerHTML=0;
		    	}
		    }
     })
     $(".haha").click(function(){
     	var num = Number($(this).siblings("u").get(0).innerHTML) *
     	Number($(this).siblings("form").children(".shu").get(0).value);
     	$(".gigi").get(0).innerHTML=Number($(".gigi").get(0).innerHTML)-num;
     })
     $("#cc").click(function(){
     	if($(this).get(0).checked == true){
//   		console.log($("dd").length)
     		for(var i=0;i<$("dd").length;i++){
     			
     			if($("dd").eq(i).children("p").children(".cc1").get(0).checked == true){
				    
		        }else{
		        	$("dd").eq(i).children("p").children(".cc1").get(0).checked = true;
		        	var num=($("dd").eq(i).children("p").children(".cc1").parent().siblings("u").get(0).innerHTML) *
			    	Math.round($("dd").eq(i).children("p").children(".cc1").parent().siblings("form").children(".shu").get(0).value);
			    	num=parseFloat(num.toFixed(2));
			    	console.log(num);
			    	$(".gigi").get(0).innerHTML=Math.round($(".gigi").get(0).innerHTML)+num;
		        }
     		}
     	}else{
     		for(var i=0;i<$("dd").length;i++){
     			
     			if($("dd").eq(i).children("p").children(".cc1").get(0).checked == false){
			    	
		        }else{
		        	$("dd").eq(i).children("p").children(".cc1").get(0).checked = false;
		        	var num=Math.round($("dd").eq(i).children("p").children(".cc1").parent().siblings("u").get(0).innerHTML) *
			    	Math.round($("dd").eq(i).children("p").children(".cc1").parent().siblings("form").children(".shu").get(0).value);
			    	num=parseFloat(num.toFixed(2));
			    	console.log(num);
			    	$(".gigi").get(0).innerHTML=Math.round($(".gigi").get(0).innerHTML)-num;
		        }
     		}
     		
     	}
     })
   
  
	</script>
</html>
